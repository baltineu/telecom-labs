# Цели:
Повторить:

1) Основные команды: hostname и другие (файл «Введение») + 
1) Настройку паролей (в том числе secret) +
1) Принцип, по которому свитч понимает в какой порт отправить Ethernet кадр +
1) Типы подключений: telnet, консольное подключение и web +
1) Структуру мак-адреса +
# Ход работы:
## **Пункты 1, 2, 4**
Сначала необходимо перейти в режим конфигурации: en -> conf t

Далее можно настроить имя хоста: hostname <name>

Незащищённый пароль для перехода в enable-консоль (который видно в sh run в незашифрованном виде): enable password <password>

Защищённый пароль: enable secret <password>

Доступ по линиям virtual teletype – vty (telnet, ssh):

Line vty 0 15 – диапазон портов, с 0 по 15

Password <password> - пароль для линий (открытым текстом)

Login – включить запрос пароля при входе

Exit

Аналогично настраивается консольный порт

Line console 0

Пароли хранятся открытым текстом, чтобы этого избежать используется служба password-encryption

Для доступа по vty или web понадобится присвоить коммутатору ip адрес

IP присваивается для отдельных vlan. Например для vlan 1:

Int vlan 1

No sh

Ip addr <адрес> <маска>

Теперь на компе можно просто: telnet <ip addr>

Остаётся сохранить конфиг: copy run start (running-config startup-config)

Также советуют установить приветственное сообщение:

Banner motd %Who are you? I weren’t calling for you. Go to hell!%

## **Структура MAC-адреса (с.51)**
Media Access Control address – 6-байтный бинарный адрес, по соглашению представляемое в виде разложения на шестнадцатеричные цифры, каждая шестнадцатеричная цифра имеет 16 значений, то есть две имеют 32 значения, что соответствует 8 битам или 1 байту. Значит таких цифр будет 12. Они делятся на три блока по четыре цифры.

Первая половина – первые 3 байта - это Organizationally Unique Identifier, присваиваемый IEEE. Оставшиеся три байта – Vendor Assigned, должны быть уникальными для данного OUI, то есть в целом MAC уникален для каждого устройства. 


## **Принципы работы Switch (с.111)**
**Важно:** несколько mac-адресов могут быть за одним интерфейсом, но один и тот же mac не может быть за несколькими интерфейсами – как раз это и влияет на нестабильность таблицы mac-адресов при запетливании свитчей без использования stp.

Таблица соответствия мак-адресов портам свитча хранится в **Content-Addressable memory** и иногда так и называется: CAM table. Этот тип памяти используется для хранения пар key-value (это конечно отсебятина для понимания, а не термины), CAM-память также называют ассоциативной памятью. 

Эту таблицу ещё называют switching table и bridging table.

В общем свитч, получая кадр с какого-то порта, вносит source mac из него в свою таблицу соответствия вместе с портом, с которого он получил пакет, и в дальнейшем использует эти записи для того, чтобы переправлять пакеты.

Ещё он при добавлении записей включает таймер на уничтожение. Этот таймер называется aging-time. В cert.guide: page 121. При получении пакета либо создаётся новая запись о source mac, либо inactivity timer устанавливается заново в 0 (мы делали это в задачах, зачёркивая старый таймер). По умолчанию по достижении 300 секунд запись удаляется. Можно устанавливать конкретное время для каждого vlan’а.
# Литература

1) Cert guide
1) Методичка «Введение» к УТП по ИКС, Е.А.Тихомирова
1) <https://www.engagez.net/posting/9302> - куда складывается startup-config
